<!DOCTYPE html>
<html>
<head>
    <title>Power Module to Gun Relay Matrix</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="page-content">
        <h1>Power Module to Gun Relay Matrix</h1>

        <!-- Control form -->
        <div class="control-form">
            <form id="moduleGunForm" onsubmit="return handleFormSubmit(event)">
                <div class="form-group">
                    <label for="moduleList">Power Modules (comma-separated numbers, e.g., 1,3,5):</label>
                    <input type="text" id="moduleList" required pattern="^[1-9](,[1-9])*$" title="Enter numbers 1-9 separated by commas">
                    <div class="error-message" id="moduleError"></div>
                </div>
                <div class="form-group">
                    <label for="gunNumber">Gun Number (1-6):</label>
                    <input type="number" id="gunNumber" required min="1" max="6">
                    <div class="error-message" id="gunError"></div>
                </div>
                <button type="submit" class="submit-btn">Activate Relays</button>
            </form>
        </div>
        
        <div class="legend">
            <h3>Legend:</h3>
            <p><strong>PM:</strong> Power Module (24V DC)</p>
            <p><strong>RelayXX_GunY:</strong> Relay connecting PM X to Gun Y</p>
            <p><strong>Click relays</strong> to simulate activation (green = ON)</p>
        </div>
        
        <div class="container" id="matrix">
            <!-- PM rows will be generated by JavaScript -->
        </div>
        
        <div class="arduino">
            <h3>Arduino Mega Control</h3>
            <p>Each relay is controlled by a separate GPIO pin (D22-D53)</p>
            <p>Current assignments: <span id="assignments"></span></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>